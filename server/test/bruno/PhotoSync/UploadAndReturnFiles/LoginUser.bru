meta {
  name: LoginUser
  type: http
  seq: 3
}

post {
  url: {{HOST}}/login
  body: none
  auth: inherit
}

assert {
  res.status: eq 200
  res.headers["access-control-allow-origin"]: eq {{ALLOWED_ORIGIN}}
}

script:pre-request {
  req.setBody(`{"username": "${bru.getCollectionVar("USERNAME")}", "password": "${bru.getCollectionVar("PASSWORD")}"}`)
}

script:post-response {
  bru.setVar("TOKEN", res.body)
}
